# PHP 连接 2 个字符串的 8 个方法

## 引言

今天我们不说数组，说一说字符串的操作。PHP 因为历史包袱，工具库内存在了各个时期的各种类型的 `array_*` 数组操作函数，和 `str_*` 字符串操作函数。参数位置，返回类型，函数名称等等并不相同。

我们摘取一个小的需求，说一说如何连接两个字符串。

## 学习时间

### 基础示例

原始字符串是这样的：

```php
$data1 = "the color is";
$data2 = "red";
```

想要获得下面的结果：

```php
$result = "the color is red";
```

### 方法一：点操作符

最简单的办法就是使用 PHP 标准的点连接符，像下面这样连接两个变量：

```php
$result = $data1 . $data2;
```

注意到输出结果中间少一个空格，那么就用多个点操作符连接起来：

```php
$result = $data1 . ' ' . $data2;
```

就这么简单，齐活！

### 方法二：赋值操作符

够了吗？远远不够。示例永远是最简单的用法，现实会教会我们如何编写健壮的代码。敲黑板，下面的知识，你全部用的上！不要打瞌睡。

既然点操作符是连接字符串的，我们简写起来，少用一些七绕八绕的中间变量，这么写：

```php
$data1 = "the color is ";
$data1 .= "red";
```

### 方法三：双引号变量解析

当然了，如果不想使用点操作符连接字符串，嫌他太麻烦，影响程序的连贯性，可读性也不强，我们可以使用下面的方式：

```php
$result = "{$data1} {$data2}";
```

双引号内的变量，直接解析，拼装为合适的格式就行，完全引用。是不是可读性好了许多？

或者你不想使用大括号，明确指定变量名，不加也可以，但是不保证不会出现解析错误：

```php
$result = "$data1 $data2";
```

这个写法在本节的例子上，也可行得通。

## 深入思考

### sprintf 格式化

我们换个角度想问题，既然是字符串拼接，那么也就是说是字符串的格式化。如果直接使用格式化函数，岂不是更加安全。

事实上，我们处理字符串格式化，大多时候也是这样用的，使用位置参数，指定格式的方式，使程序拥有了更强大的功能，比如订单号的拼接，一些序号的前导加零，后导加零，等等等等。

从 C 语言，我们就已经拥有了强大的 printf 和 sprintf 函数。PHP 里我们也有。代码如下：

```php
$result = sprintf("%s %s", $data1, $data2);
```

格式化字符串，位置参数绑定，这样的用法健壮而不易出错。

## 小技巧

### Heredoc 语法

PHP 内有两个小技巧，在手动造轮子的年代，你一定不少用，那就是文本原样输出所使用的 `<<<` 操作符。我们试着完成上面的需求：

```php
$result = <<<EOT
the color is red
EOT;
```

`EOT` 只是一个标识符，指定字符开始的位置，和结束的位置。

### Echo 多参数

还有一个天天用的 echo，你可能不常用到，它可以不定参数传出，并组合输出：

```php
echo $data1, ' ', $data2;
```

## 写在最后

本文通过一个极简单的功能示例，连接两个字符串变量，使用了多个方法，从中你可以看到 PHP 灵活的语法，以及解决问题的方式。经过比较，我们还是推荐使用 sprintf 函数进行数据的格式化。

Happy coding :-)
